\documentclass[a4paper, 11pt]{article}
\usepackage{amsgen,amsmath,amstext,amsbsy,amsopn,amssymb,amscd,amsthm}
\usepackage{listings}
\usepackage{setspace}
\usepackage{graphicx}
\usepackage{epstopdf}
\usepackage{hyperref}
\usepackage{dcolumn}% Align table columns on decimal point
\usepackage{bm}% bold math
\usepackage{booktabs}
\usepackage[OT1]{fontenc}
\usepackage[]{natbib}
\usepackage{pdfsync}
\usepackage{color}
\usepackage{parskip}
\usepackage{multirow}
\usepackage{natbib}
\usepackage[utf8]{inputenc}
\usepackage{hyperref}
\hypersetup{
  colorlinks   = true, %Colours links instead of ugly boxes
  urlcolor     = blue, %Colour for external hyperlinks
  linkcolor    = blue, %Colour of internal links
  citecolor   = red %Colour of citations
}

% Default fixed font does not support bold face
\DeclareFixedFont{\ttb}{T1}{txtt}{bx}{n}{12} % for bold
\DeclareFixedFont{\ttm}{T1}{txtt}{m}{n}{12}  % for normal

% Custom colors
\usepackage{color}
\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{rgb}{0.6,0,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}

\usepackage{listings}

% Python style for highlighting
\newcommand\pythonstyle{\lstset{
language=Python,
basicstyle=\ttm,
otherkeywords={self},             % Add keywords here
keywordstyle=\ttb\color{deepblue},
emph={MyClass,__init__},          % Custom highlighting
emphstyle=\ttb\color{deepred},    % Custom highlighting style
stringstyle=\color{deepgreen},
frame=tb,                         % Any extra options here
showstringspaces=false            % 
}}


% Python environment
\lstnewenvironment{python}[1][]
{
\pythonstyle
\lstset{#1}
}
{}

% Python for external files
\newcommand\pythonexternal[2][]{{
\pythonstyle
\lstinputlisting[#1]{#2}}}

% Python for inline
\newcommand\pythoninline[1]{{\pythonstyle\lstinline!#1!}}


\setlength{\topmargin}{-0.5in}
\setlength{\oddsidemargin}{0in}
\setlength{\evensidemargin}{0in}
\setlength{\textheight}{9in}
\setlength{\textwidth}{6.5in}
\setlength{\footskip}{0.2in}


\newtheorem{theorem}{Theorem}[section]
\newtheorem{corollary}{Corollary}[section]
\newtheorem{proposition}{Proposition}[section]
\newtheorem{lemma}{Lemma}[section]
\newtheorem{example}{Example}[section]
\newtheorem{definition}{Definition}[section]

\newcommand{\thmref}[1]{Theorem~\ref{#1}}
\newcommand{\propref}[1]{Proposition~\ref{#1}}
\newcommand{\corref}[1]{Corollary~\ref{#1}}
\newcommand{\lemref}[1]{Lemma~\ref{#1}}
\newcommand{\secref}[1]{\S\ref{#1}}
\newcommand{\figref}[1]{Figure~\ref{#1}}


\newcommand{\wt}{\widetilde}

\newcommand{\fdp}{\textsc{fdp}}
\newcommand{\fdr}{\textsc{fdr}}
\newcommand{\fnr}{\textsc{fnr}}
\newcommand{\fnp}{\textsc{fnp}}
\newcommand{\mfdr}{m\textsc{fdr}}
\newcommand{\mfnr}{m\textsc{fnr}}

\newcommand{\sor}{\textsc{or}}

\newcommand{\Cov}{\mathrm{Cov}}
\newcommand{\Cor}{\mathrm{Cor}}
\newcommand{\diag}{\mathrm{diag}}
\newcommand{\Var}{\mathrm{Var}}
\newcommand{\sgn}{\mathrm{sgn}}

\newcommand{\normal}{\mathrm{N}}

\newcommand{\etc}{\textit{etc}.}
%\newcommand{\etal}{\textit{et al}}
\newcommand{\ie}{\textit{i.e.}}
\newcommand{\eg}{\textit{e.g.}}
\newcommand{\iid}{\textit{i.i.d}}
\newcommand{\vs}{\textit{vs.}}

\newcommand{\trans}{\mathrm{T}}
\newcommand{\ud}{\,\mathrm{d}}
\newcommand{\uH}{\,\mathrm{H}}
\newcommand{\EE}{\mathbb{E}}
\newcommand{\PP}{\mathbb{P}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\Or}{\mathcal{O}}
\newcommand{\Ir}{\mathcal{I}}
\newcommand{\Ar}{\mathcal{A}}
\newcommand{\Br}{\mathcal{B}}
\newcommand{\Cr}{\mathcal{C}}
\newcommand{\Dr}{\mathcal{D}}
\newcommand{\Er}{\mathcal{E}}
\newcommand{\Mr}{\mathcal{M}}
\renewcommand{\Or}{\mathcal{O}}
\renewcommand{\Pr}{\mathcal{P}}
\newcommand{\Rr}{\mathcal{R}}
\newcommand{\Ur}{\mathcal{U}}
\newcommand{\Vr}{\mathcal{V}}
\newcommand{\Sr}{\mathcal{S}}
\newcommand{\Cf}{\mathfrak{C}}
\newcommand{\Sf}{\mathfrak{S}}

\newcommand{\va}{\boldsymbol{a}}
\newcommand{\vA}{\boldsymbol{A}}
\newcommand{\vb}{\boldsymbol{b}}
\newcommand{\vc}{\boldsymbol{c}}
\newcommand{\vD}{\boldsymbol{D}}
\newcommand{\ve}{\boldsymbol{e}}
\newcommand{\vh}{\boldsymbol{h}}
\newcommand{\vi}{\boldsymbol{i}}
\newcommand{\vk}{\boldsymbol{k}}
\newcommand{\vK}{\boldsymbol{K}}
\newcommand{\vI}{\mathbf{I}}
\newcommand{\vL}{\boldsymbol{L}}
\newcommand{\vP}{\boldsymbol{P}}
\newcommand{\vp}{\boldsymbol{p}}
\newcommand{\vr}{\boldsymbol{r}}
\newcommand{\vu}{\boldsymbol{u}}
\newcommand{\vV}{\boldsymbol{V}}
\newcommand{\vx}{\boldsymbol{x}}
\newcommand{\vX}{\boldsymbol{X}}
\newcommand{\vy}{\boldsymbol{y}}
\newcommand{\vY}{\boldsymbol{Y}}
\newcommand{\vz}{\boldsymbol{z}}
\newcommand{\vZ}{\boldsymbol{Z}}
\newcommand{\vT}{\boldsymbol{T}}
\newcommand{\vone}{\boldsymbol{1}}
\newcommand{\vzero}{\boldsymbol{0}}
\newcommand{\balpha}{\boldsymbol{\alpha}}
\newcommand{\bbeta}{\boldsymbol{\beta}}
\newcommand{\bdel}{\boldsymbol{\delta}}
\newcommand{\bgam}{\boldsymbol{\gamma}}
\newcommand{\bmu}{\boldsymbol{\mu}}
\newcommand{\bth}{\boldsymbol{\theta}}
\newcommand{\bome}{\boldsymbol{\omega}}
\newcommand{\bphi}{\boldsymbol{\phi}}
\newcommand{\bLam}{\boldsymbol{\Lambda}}
\newcommand{\bSigma}{\boldsymbol{\Sigma}}
\newcommand{\bpi}{\boldsymbol{\pi}}
\newcommand{\beps}{\boldsymbol{\epsilon}}
\newcommand{\bvareps}{\boldsymbol{\varepsilon}}

\newcommand{\vtx}{\textbf{x}}
\newcommand{\vty}{\textbf{y}}

\newcommand{\eps}{\epsilon}
\newcommand{\vareps}{\varepsilon}
\newcommand{\heps}{\hat{\epsilon}}

\newcommand{\tbeta}{\tilde{\beta}}
\newcommand{\tbbeta}{\tilde{\boldsymbol{\beta}}}

\newcommand{\heta}{\hat{\eta}}
\newcommand{\teta}{\tilde{\eta}}

\newcommand{\tbSigma}{\tilde{\boldsymbol{\Sigma}}}

\newcommand{\thickbar}[1]{\mathbf{\bar{\text{$#1$}}}}

\newcommand{\blind}{0}
\newcommand{\ignore}[1]

\def\hatT{\hat{T}}
\def\hatpi{\hat{\pi}_{0}}
\def\hatf{\hat{f}}
\def\hatq{\hat{q}}
\def\hatqstar{\hat{q}^*}
\def\hatgstar{\hat{G}^*}
\def\bighatqstar{\hat{Q}^*}
\def\oracleT{T_{OR}}
\def\hatoracleT{\hat{T}_{OR}}
\title{ Lab Assignment 5: Data Visualization with D3.js}
\author{Due: 11:59 PM Feb 18, Wednesday }
\date{}

\begin{document}

\maketitle
In this lab, you will learn the basics of D3.js, another popular tools for interactive visualization. It's better if you have a background knowledge of HTML, CSS, JavaScript. An excellent 10 minutes overview of these fundamentals is on this website, \href{http://alignedleft.com/tutorials/d3/fundamentals}{alignedleft.com}, by Scott Murray. To be more proficient with D3.js, you are encouraged to go through the tutorial by the same person,\href{http://alignedleft.com/tutorials/d3}{visualization with D3.js}(time estimates: 10-15 hours).

\paragraph*{Submission} Please submit all your writeups, figures through blackboard.
\section{D3.js Tutorial}
This tutorial illustrates how to plot circles, bind data with the plots, plot word cloud. 

\textbf{A simple example of plotting circles}
\begin{enumerate}
\item Open a brower, e.g., Chrome, FireFox or IE. Chrome is used in the examples.
\item Open the web page \href{http://nymph332088.github.io/CIS4340/index.html}{main page}.
\item Stay on the page, open \texttt{Chrome -> More tools -> Developer Tool}. Or click \texttt{F12} button on the keyboard to open \texttt{Developer Tool}. You will see the \texttt{Elements, Sources, Console, ...} tabs. Click on \texttt{Elements} tab. If you mouse hovers on any tag, the corresponding content will be highlighted on the web page with a blue background. Internal CSS styles are included within \texttt{<style></style>} tag under the \texttt{<head>}. External CSS sheets are linked in the head too.
\item Select a DOM element using plain JavaScript. In the console, type \texttt{document.getElementById( `footer');}, you will get a DOM element returned. DOM stands for {\bf D}ocument {\bf O}bject {\bf M}odel.
\item Select a DOM element using D3.js. First, copy all the text on \href{https://raw.githubusercontent.com/mbostock/d3/master/d3.min.js}{D3.js page} in the console. Second, type \texttt{var header = d3.select(`\#{header}');}, you will get an array of DOM nodes. Third, change the header of the page by typing \texttt{header.select(`h1').text(`Hello World!');}; change the header background color by typing \texttt{header.select(`h1').style( `background-color', `green');}
\item Draw a dot with D3. D3 draws {\bf S}calable {\bf V}ector {\bf G}raphics, which is a text-based image format. First, define a variable called \texttt{var svg = d3.select(`\#{footer}').append(`svg');}. Second, set the width and height attributes of the SVG canvas by typing {\tt svg.attr( `width',60).attr( `height',50)}. Third, draw a circle on the canvas by typing \texttt{var circle = svg.append(`circle');}. Forth, you can also set the attributes of the circle to specify its appearance, type \texttt{circle.attr( `cx','25).attr( `cy','25').attr( `r',22)} to see the circle in the top right corner. Continue to set \texttt{circle.attr(`fill',`blue').attr(`stroke',`gray').attr(`stroke-width','2');}. (Notice the difference between \texttt{attr()} and \texttt{style()}). For more appearance of circles, here is the \href{http://alignedleft.com/tutorials/d3/an-svg-primer}{reference}. How D3 SVG place your plots? See \href{http://alignedleft.com/tutorials/d3/an-svg-primer}{SVG primer}.

\item D3 data binding. Suppose you need to draw 5 dots, with radius of each specified by a different value. Would you append 5 circles by typing the above codes 5 times? Is there any easier way? Yes. Let's do it. First, reload the page to clear what you did before. Then copy all the text again on \href{https://raw.githubusercontent.com/mbostock/d3/master/d3.min.js}{D3.js page} to include D3.js. Now, draw a bigger canvas by typing \texttt{var svg = d3.select(`\#{footer}').append(`svg'); svg.attr( `width',500).attr( `height',80);} 
\item D3 data binding continued. First, define the radius array, \texttt{var radius= [10, 15,20, 25, 30];}. Then, declare 5 place holders on the canvas for the 5 circles in the future, typing \texttt{var circles = svg.selectAll(`\#{varycircle}').data(radius).enter()}. Third, for each place holder, append an circle node, type \texttt{circles = circles.append(`circle');}. Forth, binding the data with the plot appearance, type \texttt{circles.attr( `r', function(d) \{return d;\})}. Fifth, specify the x and y position so that the 5 circles are next to each other, \texttt{circles.attr(`cx',function(d,i)\{return (i*50) + 25; \}}. It's the same syntax to specify any other appearance, as if you are manipulating one circle at a time. To specify y position, \texttt{circles.attr(`cy',30)} or \texttt{circles.attr(`cy',function(d)\{return 30;\}}. (\href{http://alignedleft.com/tutorials/d3/data-types}{Data types} you should know in JavaScript, which are kind of similar to Python.)



\end{enumerate}
\textbf{More complicated word cloud example \protect \footnote{Based on \href{http://www.jasondavies.com/wordcloud}{Jason David's code}}}

The plot in Figure \ref{fig:wordcloud} shows the word cloud of the sample \href{http://nymph332088.github.io/CIS4340/labassignments/Lab2/twitter_data.txt}{tweets data}. The size of each word is proportional to the word count of all the tweets. You can see the basketball is with the largest size, that is because the example twitter data is crawled by keyword `basketball'. The program is set to show up to 500 words. We also see kobe, LSU, and some video links be the top 500 most frequent words. 

Now, we illustrate how to plot the word cloud based on your own data.
\begin{enumerate}
\item Reload the page to clear what you did before. Then copy all the text again on \href{https://raw.githubusercontent.com/mbostock/d3/master/d3.min.js}{D3.js page} to include D3.js.
\item To plot word cloud, you need to write hundreds of code, but the good news is someone already did it. Let's copy and paste all the text into the console on the page \href{http://nymph332088.github.io/CIS4340/labassignments/Lab5/auxiliary_functions.js}{word cloud auxiliary functions}. Now, let's call those functions to create a simple word cloud. 
\item Open the link \href{http://nymph332088.github.io/CIS4340/labassignments/Lab5/wordcloudgeneration.js}{word cloud generation code}. You can copy and paste all the code directly to the console. When you press enter, you will see a word cloud for a \href{http://www.jasondavies.com/wordtree/cat-in-the-hat.txt}{sample text}. The last two lines specify a string variable \texttt{var textdata} and call the \texttt{load()} function. Try to modify the \texttt{textdata} to another string and call \texttt{load()} function again. 
\end{enumerate}



\section{Assignments}
The word cloud plotting web page for tweets data has being organized and is accessible at \href{http://nymph332088.github.io/CIS4340/labassignments/Lab5/wordcloud.html}{word cloud web}. By clicking the button and select a file, the web page automatically extract the \texttt{text} field of the json tweets file.
In Lab 2, you downloaded tweets data from different locations, e.g., Philadelphia and Boston.
\begin{enumerate}
\item Show the word clouds of tweets respectively that you crawled from two places.
\item Show the word cloud of the most recent two days of the two locations. Check the \texttt{created\_at} fields of the tweets to filter by time. You can preprocess data in Python to create the files needed for the word cloud program. Or if you are confident, you can try to modify the \href{file:///home/nymph/nymph332088.github.io/CIS4340/labassignments/Lab5/wordcloud.js}{wordcloud.js} such that it can filter tweets by time.
\item Show any word cloud that might interest you.
\item Write up your discoveries.
\end{enumerate}

\section{Extra Credits}
Now, you've get the basic ideas of D3.js, it's time to explore yourself. The tutorial by Murphy is an excellent starting point, even you have no idea of what is HTML, CSS, JavaScript. Then see whether you can do other D3 visualization with the auto car dataset, twitter data set or the household power consumption data. Some links might be insightful:
\begin{enumerate}
\item \href{http://www.gapminder.org/world/}{http://www.gapminder.org/world/ (Wealth of nations)}
\item \href{http://www.jasondavies.com/wordcloud}{ http://www.jasondavies.com/wordcloud (word cloud)}
\item \href{http://mbostock.github.io/d3/talk/20111116/iris-splom.html}{http://mbostock.github.io/d3/talk/20111116/iris-splom.html (scatterplot)}
\item \href{http://astro.temple.edu/~tuc17157/em_ordering/basic_v2_wave_classes_flip.html}{ ordered heatmaps}
\item \href{http://neuralengr.com/asifr/journals/} {http://neuralengr.com/asifr/journals/ (showing 3 attributes)}
\item \href{http://square.github.io/cubism/}{http://square.github.io/cubism/ (time series)}
\item \href{http://bl.ocks.org/wizicer/f662a0b04425fc0f7489}{http://bl.ocks.org/wizicer/f662a0b04425fc0f7489 (CS skills in time)}
\item \href{http://windhistory.com/map.html4.00/36.00/-95.00}{http://windhistory.com/map.html\#{4.00}/36.00/-95.00 (spatial data)}
\item \href{}{http://www.trulia.com/vis/tru247/ http://www.trulia.com/vis/metro-movers/ (spatial temporal data)}
\item \href{http://remittances.herokuapp.com/?en}{http://remittances.herokuapp.com/?en (spatial temporal)}
\item \href{http://bost.ocks.org/mike/miserables/}{http://bost.ocks.org/mike/miserables/  (graph data)}
\item \href{http://www.brightpointinc.com/interactive/political_influence/index.html?source=d3js}{http://www.brightpointinc.com/interactive/political\_influence/index.html?source=d3js (circular plot)}
\item \href{http://air.nullschool.net/}{http://air.nullschool.net/ (amazing demo)}
\item \href{http://bl.ocks.org/fhernand/9a9f93f2a6b0e83a9294}{http://bl.ocks.org/fhernand/9a9f93f2a6b0e83a9294 (passes in a game)}
\item \href{http://christopheviau.com/d3list/gallery.html}{http://christopheviau.com/d3list/gallery.html (D3 gallery)}
\end{enumerate}
\begin{figure}[h!]
  \centering
      \includegraphics[width=0.5\textwidth]{word_cloud.png}
  \caption{Word cloud for \href{http://nymph332088.github.io/CIS4340/labassignments/Lab2/twitter_data.txt}{tweets data}}
  \label{fig:wordcloud}
\end{figure}

\end{document}